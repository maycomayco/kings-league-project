---
import { getLeaderboard } from '@services/leaderboard'
import { getSchedule } from '@services/schedule'
import ScheduleRow from './ScheduleRow.astro'

const schedule = await getSchedule()

const firstDayWithPendingMatches = schedule.find(({ matches }) => {
	console.log(matches)
	const found = matches.some(({ timestamp }) => timestamp === null)
	return found
})
---

<div class='relative overflow-x-auto shadow-md sm:rounded-lg'>
	<table class='text-xs w-full text-center text-black'>
		<thead class='font-black text-white uppercase bg-black'>
			<tr>
				<th scope='col' colspan='5' class='px-6 py-3'>ESPECIAL</th>
			</tr>
		</thead>
		<tbody>
			{
				firstDayWithPendingMatches.matches.map((match) => (
					<ScheduleRow
						useSmallNames
						local={match.teams[0]}
						visitant={match.teams[1]}
						score={match.score}
						timestamp={match.timestamp}
						hour={match.time}
					/>
				))
			}
		</tbody>
	</table>
</div>
